<?php
 goto Jsd7I; uSzpB: if ($UQsCU) { goto Wo1Lc; } goto tQ4Lg; jg4Fw: if ($sh5SJ) { goto F3uHi; } goto waCjJ; wS9jd: $paylog = pdo_get("\x63\157\x72\x65\137\x70\x61\x79\x6c\157\x67", array("\165\156\151\x61\143\x69\x64" => $_W["\x75\156\x69\141\143\151\144"], "\155\x6f\144\x75\x6c\x65" => $getparams["\x6d\157\x64\x75\x6c\145"], "\164\x69\144" => $getparams["\x74\151\x64"])); goto UYUwU; X0y2H: die(json_encode(array("\145\x72\162\157\162" => "\x31", "\x6d\163\x67" => "\345\x8f\x82\346\x95\xb0\xe9\x94\x99\350\257\xaf"))); goto bAhdZ; Nf7be: $hSp8m = !($gift["\x67\x69\x66\164\x70\x72\151\143\145"] * $count > $diamondsy && !empty($reply["\x65\x76\x65\x72\171\x6f\x6e\145\144\x69\x61\x6d\x6f\x6e\x64"])); goto V6DQ2; uAOXu: $reply = @array_merge($reply, unserialize($reply["\143\157\x6e\x66\151\x67"])); goto fhFHE; pXBpE: $_W["\x75\x6e\x69\141\x63\x69\x64"] = $paylog["\x75\156\x69\x61\x63\x69\144"]; goto y4Jx_; LADiB: o9OlE: goto cwu8a; pbWSm: $E4IhL = !empty($oauth_openid); goto roRpZ; A5HVY: if ($reply["\x76\x6f\164\x65\163\x74\141\162\164\x74\x69\x6d\x65"] > time()) { goto Rga3r; } goto bLXLc; ovkBQ: message(error(1, $wechat_payment_params), '', "\x61\152\141\x78", false); goto LZH1I; XNbVY: BlY84: goto vRGwf; iFUyP: die(json_encode(array("\x65\x72\162\x6f\x72" => "\x31", "\x6d\x73\147" => "\346\x9c\200\xe5\244\232\350\203\xbd\351\200\x81" . $reply["\145\x76\x65\162\171\157\x6e\x65\144\151\x61\x6d\x6f\156\x64"] . "\xe5\205\203\xe7\xa4\xbc\xe7\x89\251\xef\274\214\xe7\xbb\231\xe5\x85\xb6\xe4\273\226\xe4\272\272\xe7\202\xb9\346\234\272\344\xbc\x9a\345\x90\xa7\357\xbc\201"))); goto rfhES; ytVVW: global $_W, $_GPC; goto Ff1B4; ybAiF: $userinfo = $this->oauthuser; goto ALct1; MN7MR: die(json_encode(array("\145\x72\162\157\162" => "\61", "\155\x73\x67" => "\346\x97\240\xe6\xb3\x95\xe8\x8e\267\xe5\x8f\x96\117\x50\116\x45\x49\104\357\xbc\214\xe8\257\267\346\237\245\xe7\x9c\213\346\230\257\345\x90\246\345\x80\237\xe6\x9d\203\xe6\x88\226\351\x85\x8d\347\275\256\xe5\245\275\xe5\x85\254\344\xbc\227\xe5\x8f\xb7\xef\274\x81\50\60\x31\60\x31\x29"))); goto LADiB; VCFps: if ($WD9ft) { goto j49cU; } goto lFIrr; CN5sU: die(json_encode(array("\145\x72\x72\157\162" => "\x31", "\155\x73\147" => "\xe5\xb7\xb2\347\xbb\223\346\235\237\xe6\212\x95\347\245\250\xef\xbc\201"))); goto T4ahw; jIWnZ: QFN7d: goto lN07D; bLXLc: if ($reply["\x76\157\x74\145\x65\x6e\x64\164\151\x6d\x65"] < time()) { goto WfgM0; } goto ZYjFF; Tu4X5: $g7Hd1 = !($reply["\145\156\x64\164\x69\x6d\145"] < time()); goto SVumL; r_Ml2: ZyLDO: goto DWcCS; w7jJn: if ($O4pep) { goto FthiL; } goto X0y2H; GJfMP: die(json_encode(array("\145\x72\x72\157\x72" => "\x31", "\x6d\x73\x67" => "\xe6\x9c\252\xe5\274\x80\345\247\213\xe6\212\x95\347\xa5\xa8\357\274\201"))); goto cJS15; MYabK: $wechat_payment = $setting["\160\x61\x79\x6d\x65\x6e\164"]["\167\145\x63\150\x61\x74"]; goto wS1J_; jf2yh: load()->model("\160\141\171\155\145\x6e\x74"); goto nQSYk; oUcIb: unset($wechat_payment["\x73\x75\x62\x5f\x6d\x63\150\137\151\x64"]); goto dIxk7; YwsOp: pozaI: goto r_Ml2; ZNebd: $getparams = array("\155\145\x74\x68\157\144" => "\167\x65\143\150\141\x74", "\164\x69\x64" => $tid, "\164\x69\164\154\145" => "\xe6\224\xaf\344\xbb\230" . $params["\146\x65\145"] . "\345\205\x83", "\x66\x65\145" => $params["\146\x65\145"], "\155\x6f\x64\x75\x6c\145" => "\164\x79\172\155\137\144\x69\x61\155\157\156\x64\166\157\x74\x65"); goto AaHJI; G9iNU: Rga3r: goto GJfMP; PBrz_: $giftdata = @unserialize($reply["\x67\151\146\x74\x64\x61\x74\x61"]); goto NIiNK; cJS15: goto R3ikK; goto L1CXH; yxKer: $UL7IL = !empty($reply["\x73\164\141\164\165\163"]); goto Q1VCV; sxK86: die(json_encode(array("\x65\x72\162\157\162" => "\x31", "\155\x73\147" => "\xe6\264\xbb\xe5\212\xa8\350\xbf\230\346\xb2\241\xe6\234\x89\345\274\200\345\xa7\213"))); goto fNBle; nn4Ma: if ($jByTg) { goto bde8g; } goto sxK86; ex8HU: if ($oOrAR) { goto pozaI; } goto sSdoq; rf_ji: goto BlY84; goto VgtxC; fNBle: bde8g: goto Tu4X5; D2Our: $FC0uU = !pdo_insert($this->tablegift, $giftdata); goto hJYMa; ZYjFF: goto R3ikK; goto G9iNU; Gwkpk: $moduleid = empty($moduleid) ? "\60\60\x30\x30\x30\60" : sprintf("\45\60\x36\144", $moduleid); goto nq6ym; HuiPR: $id = intval($_GPC["\151\144"]); goto Jh3BT; hspCP: $giftdata = array("\x72\151\x64" => $rid, "\164\x69\144" => $id, "\x75\156\151\141\143\151\x64" => $_W["\x75\x6e\151\141\143\151\144"], "\x6f\141\x75\x74\x68\137\x6f\160\145\156\x69\144" => $userinfo["\157\x61\x75\x74\x68\137\x6f\160\x65\x6e\151\144"], "\157\160\x65\156\151\x64" => $userinfo["\157\160\x65\156\x69\144"], "\141\x76\141\164\x61\x72" => $userinfo["\x61\x76\141\164\x61\162"], "\x6e\x69\143\x6b\x6e\141\x6d\145" => $userinfo["\156\x69\x63\x6b\156\x61\x6d\145"], "\165\163\x65\162\x5f\x69\x70" => $_W["\x63\154\x69\x65\x6e\x74\x69\160"], "\x67\151\x66\164\x69\143\x6f\156" => $gift["\x67\x69\x66\x74\x69\x63\157\x6e"], "\x67\151\146\164\143\157\x75\156\x74" => $count, "\147\x69\x66\164\x74\x69\x74\x6c\145" => $gift["\x67\151\x66\164\164\151\x74\154\145"], "\147\x69\x66\x74\166\x6f\x74\x65" => $gift["\x67\151\x66\x74\x76\x6f\x74\145"] * $count, "\x66\x65\145" => $params["\x66\x65\x65"], "\160\x74\151\x64" => $tid, "\151\x73\160\141\171" => 0, "\x73\164\141\x74\165\163" => 0, "\x63\162\145\141\164\145\164\x69\x6d\145" => time()); goto D2Our; Q1VCV: if ($UL7IL) { goto RzI_7; } goto uKG2F; xWdWL: die(json_encode(array("\145\x72\x72\x6f\x72" => "\61", "\155\x73\x67" => "\xe6\xb4\273\xe5\212\250\345\267\262\xe7\246\x81\347\224\xa8"))); goto jIWnZ; AaHJI: $moduleid = pdo_getcolumn("\x6d\157\x64\165\154\x65\x73", array("\156\141\155\145" => $getparams["\155\x6f\144\165\154\145"]), "\x6d\x69\x64"); goto Gwkpk; wS1J_: $account = pdo_get("\141\x63\143\x6f\x75\156\x74\x5f\167\x65\143\x68\x61\164\x73", array("\141\x63\x69\144" => $wechat_payment["\141\143\x63\x6f\x75\156\164"]), array("\153\x65\171", "\163\x65\143\x72\145\164")); goto D_4o1; oPap7: die(json_encode(array("\x65\162\162\x6f\162" => "\x31", "\x6d\x73\147" => "\xe6\264\273\345\212\xa8\xe5\xb7\xb2\347\xbb\x8f\xe7\273\223\346\235\x9f"))); goto sStMi; hxZ3H: e0vi4: goto ovkBQ; UYUwU: $py59o = !empty($paylog); goto oljRl; hJYMa: if ($FC0uU) { goto rA3KY; } goto ZNebd; Wer0o: KaxqD: goto CWyKL; nDkjQ: $paylog["\x74\151\164\x6c\x65"] = $getparams["\164\151\x74\154\x65"]; goto jf2yh; T4ahw: R3ikK: goto PBrz_; ALct1: $oauth_openid = $userinfo["\x6f\x61\x75\x74\x68\x5f\157\160\x65\156\151\x64"]; goto pbWSm; Jh3BT: $ty = $_GPC["\164\x79"]; goto szbT6; ygB79: RzI_7: goto A5HVY; CWyKL: he0ki: goto f1veg; t1I7N: if ($diamondsy > 0) { goto X8cCj; } goto iFUyP; j8HSs: $wechat_payment["\157\160\145\x6e\x69\x64"] = $_SESSION["\x6f\x61\165\x74\x68\x5f\157\x70\x65\x6e\x69\x64"]; goto R4bj8; jzeZ2: X8cCj: goto kfTPe; waCjJ: die(json_encode(array("\x65\x72\x72\157\x72" => "\x31", "\155\163\147" => "\350\xbf\231\344\270\252\350\256\242\345\215\225\xe5\267\262\xe7\xbb\x8f\346\224\xaf\344\273\x98\346\210\x90\345\212\x9f\x2c\40\xe4\270\x8d\xe9\234\200\xe8\246\x81\351\207\x8d\xe5\xa4\215\346\224\257\344\xbb\230\56"))); goto dt6H3; oljRl: if ($py59o) { goto my6KS; } goto Guvi2; VAJE3: $jointotal = pdo_fetchcolumn("\123\x45\114\105\x43\x54\40\x43\x4f\125\x4e\124\50\151\144\x29\40\106\x52\x4f\x4d\40" . tablename($this->tablevoteuser) . "\x20\x57\110\105\x52\105\x20\x20\40\162\151\x64\x20\x3d\x20\72\162\151\x64\40\40" . $condition, array("\x3a\x72\x69\144" => $rid)); goto V9RMH; tCL8I: $UQsCU = !(!empty($paylog) && empty($paylog["\165\x6e\x69\157\156\164\x69\144"])); goto uSzpB; Jsd7I: define("\111\x4e\137\115\x4f\102\x49\x4c\105", true); goto ytVVW; kfTPe: die(json_encode(array("\145\x72\162\157\162" => "\61", "\x6d\163\147" => "\346\x9c\200\345\244\x9a\350\xbf\x98\xe8\x83\275\351\200\201" . $diamondsy . "\345\205\x83\xe7\244\xbc\347\x89\xa9\357\xbc\214\xe4\xbf\xae\346\x94\271\345\220\x8e\345\x86\x8d\xe9\200\201\357\xbc\x81"))); goto Wer0o; rfhES: goto KaxqD; goto jzeZ2; sStMi: SX0qc: goto yxKer; V6DQ2: if ($hSp8m) { goto he0ki; } goto t1I7N; nBEOx: if ($UL7IL) { goto QFN7d; } goto xWdWL; uKG2F: die(json_encode(array("\x65\x72\162\x6f\x72" => "\x31", "\x6d\x73\x67" => "\xe6\264\273\xe5\212\250\345\267\xb2\xe7\246\x81\347\x94\250"))); goto ygB79; yu9x6: if ($r8BCC) { goto ZyLDO; } goto k0Tif; cwu8a: $reply = pdo_fetch("\123\x45\114\105\103\x54\40\x72\x69\x64\54\164\x69\164\x6c\145\54\x73\x68\141\162\x65\164\151\164\154\x65\54\x73\x68\x61\x72\x65\151\x6d\x67\x2c\163\x68\141\x72\x65\144\x65\x73\x63\x2c\143\157\x6e\x66\151\x67\x2c\147\x69\x66\164\x64\x61\164\141\54\x73\x74\x61\x72\x74\164\x69\155\145\x2c\145\x6e\144\164\x69\155\145\x2c\x61\160\x73\164\x61\x72\x74\164\x69\155\145\54\141\x70\x65\x6e\144\x74\x69\x6d\145\54\x76\x6f\164\145\163\164\x61\x72\164\164\x69\x6d\x65\x2c\166\157\x74\x65\x65\x6e\x64\x74\151\155\145\x2c\163\164\x61\x74\165\163\x20\x20\106\x52\117\115\x20" . tablename($this->tablereply) . "\40\x57\x48\105\x52\x45\x20\162\x69\144\40\75\x20\72\162\x69\x64\x20", array("\72\x72\151\144" => $rid)); goto uAOXu; sVTlG: pdo_insert("\x63\x6f\162\x65\137\160\x61\x79\154\157\x67", $paylog); goto zfpmF; sSdoq: die(json_encode(array("\145\162\162\x6f\162" => "\x31", "\155\163\x67" => "\xe6\264\273\xe5\212\xa8\350\277\x98\346\x9c\xaa\xe5\xbc\200\345\xa7\x8b\357\xbc\214\xe6\xb2\241\346\x9c\211\xe8\xbe\276\345\x88\xb0\346\234\200\345\xb0\x8f\xe5\217\x82\350\xb5\233\xe4\xba\xba\xe6\225\xb0\357\274\201"))); goto YwsOp; VgtxC: QArOm: goto nZ_bN; XMO8F: $diamondsy = $reply["\145\166\145\x72\171\157\x6e\145\144\x69\141\x6d\157\x6e\144"] - $voteuser["\x67\x69\146\164\143\157\165\x6e\164"]; goto Nf7be; TyGzp: $r8BCC = empty($reply["\155\151\x6e\x6e\x75\x6d\160\x65\157\x70\x6c\145"]); goto yu9x6; dIxk7: $wechat_payment_params = wechat_build($params_b, $wechat_payment); goto rf_ji; SVumL: if ($g7Hd1) { goto SX0qc; } goto oPap7; D_4o1: $wechat_payment["\141\x70\160\151\144"] = $account["\x6b\x65\x79"]; goto nGUnx; Guvi2: $paylog = array("\165\156\151\141\143\x69\x64" => $_W["\x75\x6e\x69\141\x63\151\144"], "\141\x63\x69\x64" => $_W["\x61\143\151\144"], "\x6f\x70\x65\156\x69\x64" => $userinfo["\157\x61\165\164\150\x5f\157\160\x65\x6e\151\144"], "\x6d\x6f\x64\x75\154\145" => $getparams["\x6d\157\144\165\154\145"], "\164\151\x64" => $getparams["\164\x69\x64"], "\x75\x6e\x69\157\156\164\151\x64" => $uniontid, "\146\x65\145" => $getparams["\x66\x65\x65"], "\143\141\162\144\137\146\145\145" => $getparams["\x66\x65\x65"], "\x73\x74\x61\x74\x75\x73" => "\60", "\151\x73\137\165\x73\145\143\141\162\x64" => "\60"); goto sVTlG; nZ_bN: $wechat_payment_params = wechat_proxy_build($params_b, $wechat_payment); goto XNbVY; za86J: $params_b = array("\x74\x69\144" => $paylog["\x74\151\144"], "\146\145\x65" => $paylog["\x63\x61\x72\x64\x5f\146\145\145"], "\x75\x73\x65\162" => $paylog["\157\x70\x65\156\151\144"], "\164\x69\164\x6c\145" => urldecode($paylog["\164\x69\x74\154\x65"]), "\165\x6e\x69\157\x6e\164\x69\x64" => $paylog["\165\156\151\x6f\x6e\164\x69\x64"]); goto j8HSs; R4bj8: if (intval($wechat_payment["\163\x77\x69\x74\143\x68"]) == 2 || intval($wechat_payment["\x73\167\x69\164\x63\150"]) == 3) { goto QArOm; } goto oUcIb; pfEe1: $setting = uni_setting($_W["\165\x6e\x69\141\x63\x69\144"], array("\160\x61\171\x6d\145\x6e\x74")); goto MYabK; roRpZ: if ($E4IhL) { goto o9OlE; } goto MN7MR; vRGwf: if (is_error($wechat_payment_params)) { goto e0vi4; } goto P_VIh; P_VIh: message(error(0, $wechat_payment_params), '', "\141\152\141\x78", false); goto B_DQ0; BYXe9: $jByTg = !($reply["\x73\164\x61\162\164\x74\x69\x6d\x65"] > time()); goto nn4Ma; DWcCS: $gift = $giftdata[$_GPC["\147\x69\146\x74\x69\144"]]; goto XMO8F; lFIrr: $condition .= "\40\101\116\104\40\x73\x74\141\x74\x75\x73\x3d\61\x20"; goto Kf3B8; lN07D: $O4pep = !empty($reply); goto w7jJn; zfpmF: $paylog["\x70\154\x69\144"] = pdo_insertid(); goto V_v1R; nq6ym: $uniontid = date("\x59\x6d\x64\110\151\x73") . $moduleid . random(8, 1); goto wS9jd; JNw6U: $WD9ft = !($reply["\x69\163\143\150\145\143\x6b\145\x64"] == 1); goto VCFps; SpLJt: $rid = intval($_GPC["\162\151\144"]); goto HuiPR; f1veg: $tid = date("\131\155\144\110\x69") . random(12, 1); goto E0Zbg; nQSYk: pdo_update("\x63\x6f\162\x65\x5f\x70\x61\x79\154\x6f\x67", array("\157\160\x65\156\x69\x64" => $_W["\157\x70\145\156\151\x64"], "\164\x61\147" => iserializer(array("\x61\143\x69\x64" => $_W["\x61\x63\x69\144"], "\165\151\144" => $_W["\x6d\145\155\x62\x65\162"]["\x75\151\144"]))), array("\x70\154\151\144" => $paylog["\x70\x6c\x69\144"])); goto pXBpE; bAhdZ: FthiL: goto BYXe9; szbT6: $count = intval($_GPC["\143\x6f\165\x6e\164"]); goto JDK_h; gjGJ1: $sh5SJ = !(!empty($paylog) && $paylog["\163\x74\141\164\165\x73"] != "\x30"); goto jg4Fw; tQ4Lg: pdo_update("\x63\157\162\145\137\160\x61\x79\x6c\157\x67", array("\x75\x6e\x69\157\x6e\164\151\144" => $uniontid), array("\160\x6c\151\x64" => $paylog["\160\154\x69\x64"])); goto H52X7; kpoQC: $UL7IL = !empty($reply["\163\164\x61\164\x75\x73"]); goto nBEOx; V_v1R: my6KS: goto gjGJ1; fhFHE: unset($reply["\143\x6f\x6e\146\x69\x67"]); goto kpoQC; H52X7: Wo1Lc: goto nDkjQ; NIiNK: $voteuser = pdo_fetch("\x53\x45\x4c\105\x43\124\40\x2a\x20\x46\x52\117\115\x20" . tablename($this->tablevoteuser) . "\40\x57\110\105\x52\x45\x20\x72\151\x64\40\x3d\40\x3a\x72\151\x64\40\101\116\x44\x20\40\151\144\40\x3d\40\x3a\151\x64\x20", array("\72\162\151\144" => $rid, "\x3a\x69\144" => $id)); goto TyGzp; L1CXH: WfgM0: goto CN5sU; nGUnx: $wechat_payment["\163\x65\x63\x72\145\164"] = $account["\163\x65\143\x72\145\x74"]; goto za86J; B_DQ0: goto Mdczv; goto hxZ3H; LZH1I: Mdczv: goto Nfj5x; E0Zbg: $params = array("\164\151\144" => $tid, "\x6f\162\144\x65\162\163\x6e" => $tid, "\x74\x69\164\154\145" => "\346\212\x95\xe7\xa5\250\xe9\x80\201\xe7\xa4\274\xe4\273\230\346\xac\xbe", "\x66\x65\x65" => sprintf("\45\56\x32\146", $gift["\x67\151\146\164\x70\162\151\x63\145"] * $count), "\x75\x73\x65\x72" => $_W["\x6d\145\x6d\142\x65\x72"]["\x75\x69\x64"], "\x6d\157\144\165\154\145" => $this->module["\x6e\x61\x6d\145"]); goto hspCP; dt6H3: F3uHi: goto tCL8I; JDK_h: $count = empty($count) ? 1 : $count; goto ybAiF; Kf3B8: j49cU: goto VAJE3; V9RMH: $oOrAR = !($reply["\x6d\x69\x6e\156\x75\155\160\145\157\x70\154\145"] > $jointotal); goto ex8HU; y4Jx_: $_W["\x6f\x70\x65\x6e\151\144"] = $paylog["\x6f\x70\x65\x6e\151\x64"]; goto pfEe1; k0Tif: $condition = ''; goto JNw6U; Ff1B4: is_weixin(); goto SpLJt; Nfj5x: rA3KY: